"use strict";(()=>{var a={};a.id=800,a.ids=[800],a.modules={5600:a=>{a.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},7651:(a,b,c)=>{c.r(b),c.d(b,{config:()=>m,default:()=>l,handler:()=>o});var d={};c.r(d),c.d(d,{default:()=>i});var e=c(9046),f=c(8667),g=c(3480),h=c(6435);async function i(a,b){if(b.setHeader("Access-Control-Allow-Origin","*"),b.setHeader("Access-Control-Allow-Methods","GET, POST, OPTIONS"),b.setHeader("Access-Control-Allow-Headers","Content-Type"),"OPTIONS"===a.method)return b.status(200).end();class c{constructor(){this.context={userHas28CompromisedContracts:!0,userIsWorkingOnMountainShares:!0,communityIsWestVirginia:!0,previousIssue:"Ms. Jarvis was giving generic responses instead of listening"}}async processAndRespond(a){let b=this.analyzeMessage(a),c=this.determineUserNeeds(b);return this.generateAuthenticResponse(b,c)}analyzeMessage(a){let b=a.toLowerCase().split(" "),c=[],d=this.detectTone(a),e=this.detectIntent(a);return b.some(a=>["mountainshares","mountain","shares"].includes(a))&&c.push("mountainshares_project"),b.some(a=>["contract","contracts","smart"].includes(a))&&c.push("smart_contracts"),b.some(a=>["help","work","through"].includes(a))&&c.push("needs_assistance"),b.some(a=>["community","governance","decision"].includes(a))&&c.push("community_governance"),{originalMessage:a,words:b,concepts:c,tone:d,intent:e,isSpecific:c.length>0,isGeneral:0===c.length}}detectTone(a){let b=a.toLowerCase();return b.includes("help")||b.includes("please")?"seeking_help":b.includes("confused")||b.includes("understand")?"confused":b.includes("frustrated")||b.includes("problem")?"frustrated":"neutral"}detectIntent(a){let b=a.toLowerCase();return b.includes("work through")||b.includes("help me")?"needs_guidance":b.includes("explain")||b.includes("what is")?"needs_explanation":b.includes("how do")||b.includes("how to")?"needs_instructions":b.includes("should i")||b.includes("what should")?"needs_decision_help":"general_conversation"}determineUserNeeds(a){let b=[];return a.concepts.includes("mountainshares_project")&&("needs_guidance"===a.intent?b.push("specific_mountainshares_guidance"):b.push("mountainshares_information")),a.concepts.includes("smart_contracts")&&b.push("technical_contract_help"),a.concepts.includes("needs_assistance")&&1===a.concepts.length&&b.push("clarification_needed"),0===b.length&&b.push("general_conversation"),b}generateAuthenticResponse(a,b){let c="";return a.concepts.includes("mountainshares_project")?(c+="You want to work through MountainShares - I understand. ",this.context.userHas28CompromisedContracts&&(c+="Given that you have 28 compromised contracts to rebuild, I imagine you're feeling overwhelmed about where to even start. "),c+="What's the biggest challenge you're facing right now with the project? Is it the technical side of rebuilding those contracts, or more about organizing the community effort, or something else entirely?"):b.includes("clarification_needed")?c+="I want to help you, but I need to understand what specifically you're working on. Are you thinking about the MountainShares project, or something else? The more specific you can be, the better I can help.":c+="I'm listening. What's on your mind? Are you thinking about the MountainShares project, or is there something else you'd like to talk through?",c}}if("POST"===a.method){let{message:d}=a.body||{};if(!d)return b.status(400).json({success:!1,error:"No message provided"});try{let a=new c,e=await a.processAndRespond(d);return b.status(200).json({success:!0,sender:"Ms. Jarvis",message:e,confidence_level:.85,reasoning_style:"authentic_thinking_no_templates",approach:"Actually analyzing your message and thinking about what you need",timestamp:new Date().toISOString()})}catch(a){return b.status(500).json({success:!1,error:"Thinking conversation system error: "+a.message})}}if("GET"===a.method)return b.status(200).json({success:!0,message:"Ms. Jarvis Authentic Thinking System Online!",approach:"No canned responses - actually thinks about what you're saying",timestamp:new Date().toISOString()});b.status(405).json({error:"Method not allowed"})}var j=c(8112),k=c(8766);let l=(0,h.M)(d,"default"),m=(0,h.M)(d,"config"),n=new g.PagesAPIRouteModule({definition:{kind:f.A.PAGES_API,page:"/api/jarvis-enhanced-knowledge",pathname:"/api/jarvis-enhanced-knowledge",bundlePath:"",filename:""},userland:d,distDir:".next",projectDir:""});async function o(a,b,c){let d=await n.prepare(a,b,{srcPage:"/api/jarvis-enhanced-knowledge"});if(!d){b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve());return}let{query:f,params:g,prerenderManifest:h}=d;try{let c=a.method||"GET",d=(0,j.getTracer)(),e=d.getActiveScopeSpan(),i=n.instrumentationOnRequestError.bind(n),l=async e=>n.render(a,b,{query:{...f,...g},params:g,allowedRevalidateHeaderKeys:void 0,multiZoneDraftMode:!0,trustHostHeader:void 0,previewProps:h.preview,propagateError:!1,dev:n.isDev,page:"/api/jarvis-enhanced-knowledge",projectDir:"",onError:(...b)=>i(a,...b)}).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let f=d.getRootSpanAttributes();if(!f)return;if(f.get("next.span_type")!==k.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${f.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let g=f.get("next.route");if(g){let a=`${c} ${g}`;e.setAttributes({"next.route":g,"http.route":g,"next.span_name":a}),e.updateName(a)}else e.updateName(`${c} ${a.url}`)});e?await l(e):await d.withPropagatedContext(a.headers,()=>d.trace(k.BaseServerSpan.handleRequest,{spanName:`${c} ${a.url}`,kind:j.SpanKind.SERVER,attributes:{"http.method":c,"http.target":a.url}},l))}catch(a){if(n.isDev)throw a;(0,e.sendError)(b,500,"Internal Server Error")}finally{null==c.waitUntil||c.waitUntil.call(c,Promise.resolve())}}}};var b=require("../../webpack-api-runtime.js");b.C(a);var c=b.X(0,[169],()=>b(b.s=7651));module.exports=c})();